<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joel Parker">
<meta name="dcterms.date" content="2023-08-14">

<title>Joel Parker’s Blog - Causal Inference in Statistics: A Primer. Preliminaries</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Joel Parker’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/JoelParker_Stat" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JoelParkerUofA" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Causal Inference in Statistics: A Primer. Preliminaries</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Statistics</div>
                <div class="quarto-category">Causal-Inference</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Joel Parker </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 14, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>A few months ago an advisor of mine mentioned some of the brilliant work that was being done in the of causal inference. This was not the first time I had heard about causal inference and it was probably closer to the 25th, but as a PhD student with a full course load and a job, it was hard to find the time to dive into this area of statistics. Recently, I purchased the Book of Why by Judea Peal. My idea was to read this book as a form of “light” reading after a long day of class to help introduce me to some of the ideas within causal inference, after all, The Book of Why was written by Peal to introduce these ideas to a general audience. However, after the first chapter I found myself getting excited about the topic and wanting to learn more. I decided I needed to find a reference that was more intended for someone like me. Specifically, I wanted to see some formulas. I don’t know how I got to be this way but here I am, and a book, filled with text, filled with jargon, is now my preferred method of learning. Congratulations academia, the transformation is complete.</p>
<p>Fast forward to now. I have completed my course work, working part time, and I am waiting for may adviser to get back leave so I can complete my comps. Please, don’t get me wrong, I still have PLENTY of work to do like writing my proposal, writing papers and studying for comps. However, I do believe that taking some time to expand my knowledge about an area of a field which I am getting a PhD in, is time well spent and who knows, maybe this could turn into part of my dissertation. Sounds like a win-win.</p>
<p>The first book I will be reading is “Causal inference in statistics: a primer” by Judea Pearl, Madelyn Glymour, and Nicholas Jewell. This blog with serve as a way to me to take notes and refine my understanding about the topics discussed in this book.</p>
</section>
<section id="why-study-causation" class="level2">
<h2 class="anchored" data-anchor-id="why-study-causation">Why Study Causation?</h2>
<p>One of the questions tackled first section of this book is, what can the concept of causation, considered on it own, tell us about the world that tried and true statistical methods can not? If causation is well defined on it’s own, then we can use causation as an addition/addendum to traditional statistics. When used together, causal inference can uncover the workings of the world that traditional methods can not.</p>
</section>
<section id="simpsons-paradox" class="level2">
<h2 class="anchored" data-anchor-id="simpsons-paradox">Simpsons Paradox</h2>
<p>Simpsons paradox is discussed to introduce a motivation for causal inference. Statisticians are familiar with this paradox and Simpsons happens to be one of my favorite paradoxes to bring up with non-statistical friends. The idea that something can be good for men, good for woman and bad for the population, is allays mind boggling to people and to my myself. However, the authors did not just pull from a bag of clever examples just to demonstrate the importance of stratifying to help research make decisions about treatment effects. They demonstrated two examples which had opposite conclusions, despite having the same values after stratification.</p>
<p>Consider example 1, where recovery rates were recorded of 700 patients after taking a drug. A total of 350 patients took the drug and 350 patients did not and the gender of each person was also recorded.</p>
<table class="table">
<caption><strong>Example 1</strong></caption>
<colgroup>
<col style="width: 14%">
<col style="width: 42%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Drug</th>
<th>No Drug</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Men</strong></td>
<td>81 out of 87 recovered (93%)</td>
<td>234 out of 270 recovered (87%)</td>
</tr>
<tr class="even">
<td><strong>Woman</strong></td>
<td>192 out of 263 recovered (73%)</td>
<td>55 out of 80 recovered (69%)</td>
</tr>
<tr class="odd">
<td><strong>Total</strong></td>
<td>273 out of 350 recovered (78%)</td>
<td>289 out of 350 recovered (83%)</td>
</tr>
</tbody>
</table>
<p>When we look at the data in example 1, for both men and woman, people who took the drug showed higher recovery rates. However, when you remove the gender information and look at the population recovery rates, people who DID NOT take the drug showed higher recovery rates.</p>
<p>In this example, how do we make conclusions about whether or not a person should take the drug? Should we base our conclusions on the overall population rate? Or, should we base our conclusions off of the men/woman sub-populations?</p>
<p>The authors argue that the answers to these questions can not be found in the data alone. Instead, we must consider the causal mechanism that generated the results of the data. Suppose, that previous studies showed that estrogen negatively impacted recovery rates and that woman are significantly more likely to take the drug than men. Then we can say that being a woman is a common cause of taking the drug and failing to recover. Therefore, we need to compare recovery rates within gender and we should utilize the recovery rates from the men/woman sub populations.</p>
<p>Now consider example 2, the results have the same recovery rates (with drug and no drug switched), but instead or recording gender, post-treatment blood pressure was recorded. Now would we want to use the overall recovery rates, or the stratified recovery rates? What if we knew that the effects recovery rates by lowering blood pressure? Since BP is one of the mechanisms that the drug effects treatment, we would want to use the general population rates.</p>
<table class="table">
<caption><strong>Example 2</strong></caption>
<colgroup>
<col style="width: 14%">
<col style="width: 42%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>No Drug</th>
<th>Drug</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Low BP</td>
<td>81 out of 87 recovered (93%)</td>
<td>234 out of 270 recovered (87%)</td>
</tr>
<tr class="even">
<td>High BP</td>
<td>192 out of 263 recovered (73%)</td>
<td>55 out of 80 recovered (69%)</td>
</tr>
<tr class="odd">
<td><strong>Total</strong></td>
<td>273 out of 350 recovered (78%)</td>
<td>289 out of 350 recovered (83%)</td>
</tr>
</tbody>
</table>
<p>The purpose of these two examples is to show that the decision to treat was not based on the data alone and required that we utilized information outside of the data. Statistics alone can not uncover the causal story. However, causal inference encompasses a set to tools that can be used to express and interpret causal assumptions. When used as an aid to statistics, we can uncover causal relationships.</p>
</section>
<section id="structural-causal-models" class="level2">
<h2 class="anchored" data-anchor-id="structural-causal-models">Structural Causal Models</h2>
<p>The authors give some ideas about basic probability theory before moving on to the introduction of graphs and structural causal models. However, I am going to skip over the introduction to probablity and focus on graphs and SCM.</p>
<section id="graphs" class="level3">
<h3 class="anchored" data-anchor-id="graphs">Graphs</h3>
<p>When talking about graphs it is easy to think about a collection of visualization tools which aid in our understanding of trends and patterns. However, in mathematics, graphs have a formal definition. A graph consists of two elements:</p>
<ol type="1">
<li>Nodes - Sometimes called vertices, are often represented as dots or circles.</li>
<li>Edges - Are lines or arrows connecting the dot/circles.</li>
</ol>
<p>An example of nodes and edges may be simlar to what is displayed below. The edges of the graph can be directed (with arrow) or undirected (without and arrow).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">graph LR;
    A((A))---B((B))
</pre>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">graph LR;
    C((C))--&gt;D((D))
</pre>
</div>
</div>
</div>
</div>
<p>When we have a directed graph and their exists a path from a node to a itself, this is referenced to as a cyclic graph.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">graph LR;
    A((A)) --&gt; B((B))
    B --&gt; C((C))
    C --&gt; A

</pre>
</div>
</div>
</div>
</div>
<p>If no such path exists then this is called an <strong>acyclic graph</strong>.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">graph LR;
    A((A)) --&gt; B((B))
    B --&gt; C((C))
    A --&gt; C
</pre>
</div>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>